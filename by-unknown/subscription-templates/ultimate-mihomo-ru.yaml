# –£–ª—å—Ç–∏–º–∞—Ç–∏–≤–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥ —Å –∫—É—á–µ–π —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤ (–ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∞–π—Ç—ã, YouTube, Discord, Telegram, Cloudflare)
# –ö–æ–Ω—Ñ–∏–≥ –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤–Ω—É—Ç—Ä–∏ –†–æ—Å—Å–∏–∏.
# –ú–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–º–Ω–æ–≥–æ –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω, –∞ —Ç–∞–∫–∂–µ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –æ—à–∏–±–∫–∏.
# –ê–≤—Ç–æ—Ä –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –≤—Å–µ–∑–Ω–∞—é—â–∏–º —ç–∫—Å–ø–µ—Ä—Ç–æ–º, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥ —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø—Ä–∏–º–µ—Ä–∞. –†–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –ø–æ–¥ —Å–µ–±—è.
# –í–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ –∏–∑—É—á–∏—Ç–µ –≤—Å–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏. –í –æ—Å–Ω–æ–≤–Ω–æ–º –æ—Ä–∏–µ–Ω—Ç–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ –æ—Å–Ω–æ–≤–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é Mihomo ‚Äî
# https://wiki.metacubex.one/ru/config/

# –í —à–∞–±–ª–æ–Ω–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –º–æ—Å—Ç—ã –∏ —Ü–µ–ø–æ—á–∫–∏ –ø—Ä–æ–∫—Å–∏, —Ç–æ–ª—å–∫–æ –ø—Ä—è–º—ã–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è.
# –í —à–∞–±–ª–æ–Ω–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø—Ä–æ–∫—Å–∏-–≥—Ä—É–ø–ø—ã ¬´–°–∞–º—ã–π –±—ã—Å—Ç—Ä—ã–π¬ª.
#
# –í —à–∞–±–ª–æ–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–æ–∫—Å–∏-–≥—Ä—É–ø–ø–∞ ¬´–õ—é–±–æ–π –¥–æ—Å—Ç—É–ø–Ω—ã–π —Å–µ—Ä–≤–µ—Ä¬ª. –í–Ω—É—Ç—Ä–∏ –≥—Ä—É–ø–ø—ã ‚Äî —Ö–æ—Å—Ç—ã –≤ —Å–ª—É—á–∞–π–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ.
# –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è –ø–µ—Ä–≤—ã–π –∏–∑ —Å–ø–∏—Å–∫–∞, –µ—Å–ª–∏ –æ–Ω –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è –≤—Ç–æ—Ä–æ–π –∏ —Ç.–¥.
# –î–ª—è –ø—Ä–æ–∫—Å–∏-–≥—Ä—É–ø–ø—ã ¬´RU —Å–∞–π—Ç—ã¬ª –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –ø—Ä–æ–∫—Å–∏ ‚Äî ¬´–ë–µ–∑ –í–ü–ù¬ª (—Ç.–µ. DIRECT).
#
# –°–ø–∏—Å–∫–∏ –¥–æ–º–µ–Ω–æ–≤ re:filter ‚Äî –¥–ª—è –ø—Ä–æ–∫—Å–∏-–≥—Ä—É–ø–ø—ã ¬´–ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∞–π—Ç—ã¬ª. –ü–æ–¥—Ä–æ–±–Ω–µ–µ —Å–º–æ—Ç—Ä–∏—Ç–µ –≤ rules.

# –ë–æ–ª—å—à–æ–µ —Å–ø–∞—Å–∏–±–æ Legiz, —á—å–∏ —Å–ø–∏—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –ø—Ä–∞–≤–∏–ª.
# –¢–∞–∫–∂–µ —Å–ø–∞—Å–∏–±–æ –∑–∞ –ø–æ—è—Å–Ω–µ–Ω–∏—è –∏ –∏–¥–µ–∏ –¥–ª—è –∫–æ–Ω—Ñ–∏–≥–æ–≤. –û—Ç–¥–µ–ª—å–Ω–æ–µ —Å–ø–∞—Å–∏–±–æ —Å–æ–æ–±—â–µ—Å—Ç–≤—É Remnawave –∏ –µ—ë —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É.

mixed-port: 7890
allow-lan: true
lan-allowed-ips: # –†–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ ip –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ lan
  - 127.0.0.0/8
  - 10.0.0.0/8
  - 172.16.0.0/12
  - 192.168.0.0/16
  - ::1/128
  - fc00::/7
tcp-concurrent: true
enable-process: true
find-process-mode: always
mode: rule
log-level: info
ipv6: false # true - –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ ipv6
bind-address: "*"
keep-alive-interval: 30
unified-delay: false

profile:
  store-selected: true
  store-fake-ip: true

sniffer:
  enable: true
  force-dns-mapping: true
  parse-pure-ip: true
  override-destination: false
  sniff:
    HTTP:
      ports:
        - 80
        - 8080-8880
      override-destination: true
    TLS:
      ports:
        - 443
        - 8443

  skip-dst-address: # –ü—Ä–æ–ø—É—Å–∫ –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞ –¥–ª—è —Ü–µ–ª–µ–≤—ã—Ö IP
    - 0.0.0.0/8
    - 10.0.0.0/8
    - 100.64.0.0/10
    - 127.0.0.0/8
    - 169.254.0.0/16
    - 172.16.0.0/12
    - 192.0.0.0/24
    - 192.0.2.0/24
    - 192.88.99.0/24
    - 192.168.0.0/16
    - 198.18.0.0/15
    - 198.51.100.0/24
    - 203.0.113.0/24
    - 224.0.0.0/3
    - ::/127
    - fc00::/7
    - fe80::/10
    - ff00::/8

tun:
  enable: true
  stack: gvisor
  auto-route: true
  auto-detect-interface: true
  dns-hijack:
    - any:53
    - tcp://any:53
  strict-route: true
  route-exclude-address:
    # –ù–µ –ø—É—Å–∫–∞–µ–º –∞–¥—Ä–µ—Å–∞ (—Å–ª—É–∂–µ–±–Ω—ã–µ, –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ) –≤ TUN
    - 0.0.0.0/8
    - 10.0.0.0/8
    - 100.64.0.0/10
    - 127.0.0.0/8
    - 169.254.0.0/16
    - 172.16.0.0/12
    - 192.0.0.0/24
    - 192.0.2.0/24
    - 192.88.99.0/24
    - 192.168.0.0/16

    # –í–Ω–∏–º–∞–Ω–∏–µ, –µ—Å–ª–∏ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å fake-ip –≤ dns, —Ç–æ –æ–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ fake-ip-range
    # –û–±—ã—á–Ω–æ –¥–ª—è fake-ip-range –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏–º–µ–Ω–Ω–æ —ç—Ç–æ—Ç –¥–∏–∞–ø–∞–∑–æ–Ω, –µ—Å–ª–∏ –≤–∫–ª—é—á–∞–µ—Ç–µ fake-ip, —Ç–æ –ø–æ–¥—É–º–∞–π—Ç–µ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ –Ω–∞–¥ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
    - 198.18.0.0/15

    - 198.51.100.0/24
    - 203.0.113.0/24
    - 224.0.0.0/3
    - ::/127
    - fc00::/7
    - fe80::/10
    - ff00::/8

dns:
  enable: true
  prefer-h3: false
  use-hosts: true
  use-system-hosts: true
  ipv6: false #true - –µ—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ —Ä–µ–∑–æ–ª–≤–∏—Ç—å –≤ ipv6
  enhanced-mode: redir-host
  # ----
  # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –≤—ã–±–∏—Ä–∞–µ–º DNS —Å–µ—Ä–≤–µ—Ä–∞ - –º–µ–Ω—è–π—Ç–µ –Ω–∞ –≤–∞—à –≤–∫—É—Å.
  default-nameserver:
    # DNS –¥–ª—è –¥–æ–º–µ–Ω–æ–≤ DNS —Å–µ—Ä–≤–µ—Ä–æ–≤
    - https://94.140.14.14/dns-query#DIRECT #Adguard DNS
    - https://8.8.8.8/dns-query#DIRECT
  proxy-server-nameserver:
    # DNS –¥–ª—è –¥–æ–º–µ–Ω–æ–≤ –ø—Ä–æ–∫—Å–∏ –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ proxies
    - https://94.140.14.14/dns-query#DIRECT
    - https://8.8.8.8/dns-query#DIRECT
  direct-nameserver:
    # DNS –¥–ª—è —Å–∞–π—Ç–æ–≤ –∏–¥—É—â–∏—Ö —á–µ—Ä–µ–∑ DIRECT
    - https://77.88.8.8/dns-query#DIRECT # Yandex DNS
    - https://8.8.8.8/dns-query#DIRECT # Google DNS
  nameserver:
    # –°–µ—Ä–≤–µ—Ä –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, DNS –∑–∞–ø—Ä–æ—Å—ã –±—É–¥—É—Ç –∏–¥—Ç–∏ —á–µ—Ä–µ–∑ —Ç–æ, —á—Ç–æ –≤—ã–±—Ä–∞–Ω–æ –≤ "–û—Å—Ç–∞–ª—å–Ω—ã–µ —Å–∞–π—Ç—ã"
    - https://8.8.8.8/dns-query#üåç –û—Å—Ç–∞–ª—å–Ω—ã–µ —Å–∞–π—Ç—ã
    - https://94.140.14.14/dns-query#üåç –û—Å—Ç–∞–ª—å–Ω—ã–µ —Å–∞–π—Ç—ã
  nameserver-policy:
    # –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ä–µ–∫–ª–∞–º—ã
    rule-set:oisd_big:
      - rcode://refused # –ö–æ–¥ –æ—Ç–∫–ª–æ–Ω—ë–Ω–Ω–æ–≥–æ DNS
    # DNS –¥–ª—è —Å–∞–π—Ç–æ–≤ —Å —Ñ–∞–π–ª–∞–º–∏ –ø—Ä–∞–≤–∏–ª
    raw.githubusercontent.com,cdn.jsdelivr.net,github.com:
      - https://8.8.8.8/dns-query#DIRECT
      - https://94.140.14.14/dns-query#DIRECT
    # DNS –¥–ª—è –∑–∞–±–ª–æ—á–µ–Ω–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤, DNS –∑–∞–ø—Ä–æ—Å—ã –±—É–¥—É—Ç –∏–¥—Ç–∏ —á–µ—Ä–µ–∑ —Ç–æ, —á—Ç–æ –≤—ã–±—Ä–∞–Ω–æ –≤ "–ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∞–π—Ç—ã"
    rule-set:ru-inside,refilter_domains,ru-inline-banned,category-porn,ai,google-deepmind,speedtest-net:
      - https://1.1.1.1/dns-query#üö´ –ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∞–π—Ç—ã # Cloudflare DNS
      - https://8.8.8.8/dns-query#üö´ –ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∞–π—Ç—ã
    # DNS –¥–ª—è Discord, DNS –∑–∞–ø—Ä–æ—Å—ã –±—É–¥—É—Ç –∏–¥—Ç–∏ —á–µ—Ä–µ–∑ —Ç–æ, —á—Ç–æ –≤—ã–±—Ä–∞–Ω–æ –≤ "Discord"
    rule-set:discord_domains:
      - https://8.8.8.8/dns-query#üí¨ Discord
      - https://94.140.14.14/dns-queryüí¨ Discord
    # DNS –¥–ª—è –¥–æ–º–µ–Ω–æ–≤ Cloudflare, DNS –∑–∞–ø—Ä–æ—Å—ã –±—É–¥—É—Ç –∏–¥—Ç–∏ —á–µ—Ä–µ–∑ —Ç–æ, —á—Ç–æ –≤—ã–±—Ä–∞–Ω–æ –≤ "Cloudflare"
    rule-set:cloudflare-domains:
      - https://8.8.8.8/dns-query#üü† Cloudflare
      - https://94.140.14.14/dns-query#üü† Cloudflare
    # DNS –¥–ª—è –¥–æ–º–µ–Ω–æ–≤ Youtube, DNS –∑–∞–ø—Ä–æ—Å—ã –±—É–¥—É—Ç –∏–¥—Ç–∏ —á–µ—Ä–µ–∑ —Ç–æ, —á—Ç–æ –≤—ã–±—Ä–∞–Ω–æ –≤ "Youtube"
    rule-set:youtube:
      - https://8.8.8.8/dns-query#‚ñ∂Ô∏è YouTube
      - https://94.140.14.14/dns-query#‚ñ∂Ô∏è YouTube
    # DNS –¥–ª—è –¥–æ–º–µ–Ω–æ–≤ Telegram, DNS –∑–∞–ø—Ä–æ—Å—ã –±—É–¥—É—Ç –∏–¥—Ç–∏ —á–µ—Ä–µ–∑ —Ç–æ, —á—Ç–æ –≤—ã–±—Ä–∞–Ω–æ –≤ "Telegram"
    rule-set:telegram-domains:
      - https://8.8.8.8/dns-query#‚û§ Telegram
      - https://94.140.14.14/dns-query#‚û§ Telegram
    # DNS –¥–ª—è RU —Å–∞–π—Ç–æ–≤, DNS –∑–∞–ø—Ä–æ—Å—ã –±—É–¥—É—Ç –∏–¥—Ç–∏ —á–µ—Ä–µ–∑ —Ç–æ, —á—Ç–æ –≤—ã–±—Ä–∞–Ω–æ –≤ "RU —Å–∞–π—Ç—ã", –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —ç—Ç–æ DIRECT
    rule-set:ru-inline,ru-outside,yandex,mailru,drweb,geosite-ru:
      - https://77.88.8.8/dns-query#‚ö™üîµüî¥ RU —Å–∞–π—Ç—ã
      - https://8.8.8.8/dns-query#‚ö™üîµüî¥ RU —Å–∞–π—Ç—ã

proxies:
  - name: "üá∑üá∫ –ë–µ–∑ VPN"
    type: direct
    udp: true
  - name: DNS-OUT
    type: dns

proxy-groups:
  - name: üö´ –ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∞–π—Ç—ã
    icon: https://cdn.jsdelivr.net/gh/remnawave/templates@main/icons/Blocked.png
    type: select
    proxies:
      - üé≤ –õ—é–±–æ–π –¥–æ—Å—Ç—É–ø–Ω—ã–π —Å–µ—Ä–≤–µ—Ä
      - üá∑üá∫ –ë–µ–∑ VPN # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ

  - name: ‚ñ∂Ô∏è YouTube
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/YouTube.png
    type: select
    proxies:
      - üö´ –ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∞–π—Ç—ã

  - name: üí¨ Discord
    icon: https://cdn.jsdelivr.net/gh/remnawave/templates@main/icons/Discord.png
    type: select
    proxies:
      - üö´ –ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∞–π—Ç—ã

  - name: ‚û§ Telegram
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Telegram.png
    type: select
    proxies:
      - üö´ –ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∞–π—Ç—ã
      - üá∑üá∫ –ë–µ–∑ VPN

  - name: üü† Cloudflare
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Cloudflare.png
    type: select
    proxies:
      - üá∑üá∫ –ë–µ–∑ VPN
      - üö´ –ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∞–π—Ç—ã

  - name: ‚ö™üîµüî¥ RU —Å–∞–π—Ç—ã
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Russia.png
    type: select
    remnawave: # –ö–∞—Å—Ç–æ–º–Ω–æ–µ –ø–æ–ª–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–µ —Ç–æ–ª—å–∫–æ –≤ Remnawave
      include-proxies: false # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –µ—Å–ª–∏ –ø–æ—Å—Ç–∞–≤–∏—Ç—å true, –ø—Ä–æ–∫—Å–∏ –±—É–¥—É—Ç –≤–∫–ª—é—á–µ–Ω—ã –≤ —ç—Ç—É –≥—Ä—É–ø–ø—É
    proxies:
      - üá∑üá∫ –ë–µ–∑ VPN

  - name: üåç –û—Å—Ç–∞–ª—å–Ω—ã–µ —Å–∞–π—Ç—ã
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Global.png
    type: select
    proxies:
      - üá∑üá∫ –ë–µ–∑ VPN
      - üö´ –ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∞–π—Ç—ã

  - name: PROXY
    remnawave: # –ö–∞—Å—Ç–æ–º–Ω–æ–µ –ø–æ–ª–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–µ —Ç–æ–ª—å–∫–æ –≤ Remnawave
      include-proxies: true
    type: select
    hidden: true
    proxies:
      - üö´ –ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∞–π—Ç—ã

  - name: üé≤ –õ—é–±–æ–π –¥–æ—Å—Ç—É–ø–Ω—ã–π —Å–µ—Ä–≤–µ—Ä
    type: fallback
    remnawave: # –ö–∞—Å—Ç–æ–º–Ω–æ–µ –ø–æ–ª–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–µ —Ç–æ–ª—å–∫–æ –≤ Remnawave
      include-proxies: true
      shuffle-proxies-order: true
    url: "https://www.gstatic.com/generate_204"
    interval: 300
    hidden: true
    lazy: true

rule-providers:
  ru-inline-banned:
    type: inline
    payload:
      - DOMAIN-SUFFIX,habr.com
      - DOMAIN-SUFFIX,seasonvar.ru
      - DOMAIN-SUFFIX,lib.social
      - DOMAIN-SUFFIX,kemono.su
      - DOMAIN-SUFFIX,jut.su
      - DOMAIN-SUFFIX,kara.su
      - DOMAIN-SUFFIX,theins.ru
      - DOMAIN-SUFFIX,tvrain.ru
      - DOMAIN-SUFFIX,echo.msk.ru
      - DOMAIN-SUFFIX,the-village.ru
      - DOMAIN-SUFFIX,snob.ru
      - DOMAIN-SUFFIX,novayagazeta.ru
      - DOMAIN-SUFFIX,moscowtimes.ru
      - DOMAIN-SUFFIX,natribu.org
      - DOMAIN-KEYWORD,animego
      - DOMAIN-KEYWORD,yummyanime
      - DOMAIN-KEYWORD,yummy-anime
      - DOMAIN-KEYWORD,animeportal
      - DOMAIN-KEYWORD,anime-portal
      - DOMAIN-KEYWORD,animedub
      - DOMAIN-KEYWORD,anidub
      - DOMAIN-KEYWORD,animelib
      - DOMAIN-KEYWORD,ikianime
      - DOMAIN-KEYWORD,anilibria
    behavior: classical
  ru-inline:
    type: inline
    payload:
      - DOMAIN-SUFFIX,2ip.ru
      - DOMAIN-SUFFIX,yastatic.net
      - DOMAIN-SUFFIX,yandex.net
      - DOMAIN-SUFFIX,yandex.kz
      - DOMAIN-SUFFIX,yandex.com
      - DOMAIN-SUFFIX,yadi.sk
      - DOMAIN-SUFFIX,mycdn.me
      - DOMAIN-SUFFIX,jivosite.com
      - DOMAIN-SUFFIX,vk.com
      - DOMAIN-SUFFIX,avira.com
      - DOMAIN-SUFFIX,.ru
      - DOMAIN-SUFFIX,.su
      - DOMAIN-SUFFIX,.by
      - DOMAIN-SUFFIX,.ru.com
      - DOMAIN-SUFFIX,.ru.net
      - DOMAIN-SUFFIX,kudago.com
      - DOMAIN-SUFFIX,kinescope.io
      - DOMAIN-SUFFIX,redheadsound.studio
      - DOMAIN-SUFFIX,plplayer.online
      - DOMAIN-SUFFIX,lomont.site
      - DOMAIN-SUFFIX,remanga.org
      - DOMAIN-SUFFIX,shopstory.live
      - DOMAIN-KEYWORD,avito
      - DOMAIN-KEYWORD,miradres
      - DOMAIN-KEYWORD,premier
      - DOMAIN-KEYWORD,shutterstock
      - DOMAIN-KEYWORD,2gis
      - DOMAIN-KEYWORD,diginetica
      - DOMAIN-KEYWORD,kinescopecdn
      - DOMAIN-KEYWORD,researchgate
      - DOMAIN-KEYWORD,springer
      - DOMAIN-KEYWORD,nextcloud
      - DOMAIN-KEYWORD,kaspersky
      - DOMAIN-KEYWORD,stepik
      - DOMAIN-KEYWORD,likee
      - DOMAIN-KEYWORD,snapchat
      - DOMAIN-KEYWORD,yappy
      - DOMAIN-KEYWORD,pikabu
      - DOMAIN-KEYWORD,okko
      - DOMAIN-KEYWORD,wink
      - DOMAIN-KEYWORD,kion
      - DOMAIN-KEYWORD,roblox
      - DOMAIN-KEYWORD,ozon
      - DOMAIN-KEYWORD,wildberries
      - DOMAIN-KEYWORD,aliexpress
    behavior: classical
  geosite-ru:
    type: http
    behavior: domain
    format: mrs
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/category-ru.mrs
    path: ./rule-sets/geosite-ru.mrs
    interval: 86400
  yandex:
    type: http
    behavior: domain
    format: yaml
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/yandex.yaml
    path: ./rule-sets/yandex.yaml
    interval: 86400
  ai:
    type: http
    behavior: domain
    format: mrs
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/category-ai-!cn.mrs
    path: ./rule-sets/ai.mrs
    interval: 86400
  mailru:
    type: http
    behavior: domain
    format: mrs
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/mailru.mrs
    path: ./rule-sets/mailru.mrs
    interval: 86400
  category-porn:
    type: http
    behavior: domain
    format: mrs
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/category-porn.mrs
    path: ./rule-sets/category-porn.mrs
    interval: 86400
  drweb:
    type: http
    behavior: domain
    format: mrs
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/drweb.mrs
    path: ./rule-sets/drweb.mrs
    interval: 86400
  geoip-ru:
    type: http
    behavior: ipcidr
    format: mrs
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/ru.mrs
    path: ./rule-sets/geoip-ru.mrs
    interval: 86400
  geoip-by:
    type: http
    behavior: ipcidr
    format: mrs
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/by.mrs
    path: ./rule-sets/geoip-by.mrs
    interval: 86400
  geosite-private:
    type: http
    behavior: domain
    format: mrs
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/private.mrs
    path: ./rule-sets/geosite-private.mrs
    interval: 86400
  geoip-private:
    type: http
    behavior: ipcidr
    format: mrs
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/private.mrs
    path: ./rule-sets/geoip-private.mrs
    interval: 86400
  discord_domains:
    type: http
    behavior: domain
    format: mrs
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/discord.mrs
    path: ./rule-sets/discord_domains.mrs
    interval: 86400
  speedtest-net:
    type: http
    behavior: domain
    format: mrs
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/speedtest.mrs
    path: ./rule-sets/speedtest-net.mrs
    interval: 86400
  remote-control:
    type: http
    behavior: domain
    format: mrs
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/category-remote-control.mrs
    path: ./rule-sets/remote-control.mrs
    interval: 86400
  inline-blocked-ips:
    type: inline
    payload:
      - IP-CIDR,172.232.25.131/32 #IP –¥–ª—è —á–∞—Ç–∞ Warframe
    behavior: classical
  discord_voiceips:
    type: http
    behavior: ipcidr
    format: mrs
    url: https://raw.githubusercontent.com/legiz-ru/mihomo-rule-sets/main/other/discord-voice-ip-list.mrs
    path: ./rule-sets/discord_voiceips.mrs
    interval: 86400
  discord_vc:
    type: inline
    payload:
      - AND,((IP-CIDR,138.128.136.0/21),(NETWORK,udp),(DST-PORT,50000-50100))
      - AND,((IP-CIDR,162.158.0.0/15),(NETWORK,udp),(DST-PORT,50000-50100))
      - AND,((IP-CIDR,172.64.0.0/13),(NETWORK,udp),(DST-PORT,50000-50100))
      - AND,((IP-CIDR,34.0.0.0/15),(NETWORK,udp),(DST-PORT,50000-50100))
      - AND,((IP-CIDR,34.2.0.0/15),(NETWORK,udp),(DST-PORT,50000-50100))
      - AND,((IP-CIDR,35.192.0.0/12),(NETWORK,udp),(DST-PORT,50000-50100))
      - AND,((IP-CIDR,35.208.0.0/12),(NETWORK,udp),(DST-PORT,50000-50100))
      - AND,((IP-CIDR,5.200.14.128/25),(NETWORK,udp),(DST-PORT,50000-50100))
      - AND,((IP-CIDR,66.22.192.0/18),(NETWORK,udp),(DST-PORT,50000-50100))
    behavior: classical
  refilter_domains:
    type: http
    behavior: domain
    format: mrs
    url: https://raw.githubusercontent.com/legiz-ru/mihomo-rule-sets/main/re-filter/domain-rule.mrs
    path: ./rule-sets/refilter.mrs
    interval: 86400
  youtube:
    type: http
    behavior: domain
    format: mrs
    interval: 86400
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/youtube.mrs
    path: ./rule-sets/youtube.mrs
  google-deepmind:
    type: http
    behavior: domain
    format: mrs
    interval: 86400
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/google-gemini.mrs
    path: ./rule-sets/gooogle-deepmind.mrs
  telegram-ips:
    type: http
    behavior: ipcidr
    format: mrs
    interval: 86400
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/telegram.mrs
    path: ./rule-sets/telegram-ips.mrs
  telegram-domains:
    type: http
    behavior: domain
    format: mrs
    interval: 86400
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/telegram.mrs
    path: ./rule-sets/telegram-domains.mrs
  oisd_big:
    type: http
    behavior: domain
    format: mrs
    url: https://raw.githubusercontent.com/legiz-ru/mihomo-rule-sets/main/oisd/big.mrs
    path: ./rule-sets/oisd_big.mrs
    interval: 86400
  torrent-trackers:
    type: http
    behavior: domain
    format: mrs
    url: https://raw.githubusercontent.com/legiz-ru/mihomo-rule-sets/main/other/torrent-trackers.mrs
    path: ./rule-sets/torrent-trackers.mrs
    interval: 86400
  torrent-clients:
    type: http
    behavior: classical
    format: yaml
    url: https://raw.githubusercontent.com/legiz-ru/mihomo-rule-sets/main/other/torrent-clients.yaml
    path: ./rule-sets/torrent-clients.yaml
    interval: 86400
  ru-apps:
    type: http
    behavior: classical
    format: yaml
    url: https://raw.githubusercontent.com/legiz-ru/mihomo-rule-sets/main/other/ru-app-list.yaml
    path: ./rule-sets/ru-apps.yaml
    interval: 86400
  ru-inside:
    type: http
    behavior: classical
    format: text
    url: https://raw.githubusercontent.com/itdoginfo/allow-domains/main/Russia/inside-clashx.lst
    path: ./rule-sets/ru-inside.lst
    interval: 86400
  ru-outside:
    type: http
    behavior: classical
    format: text
    url: https://raw.githubusercontent.com/itdoginfo/allow-domains/main/Russia/outside-clashx.lst
    path: ./rule-sets/ru-outside.lst
    interval: 86400
  cloudflare-ips:
    type: http
    behavior: ipcidr
    format: mrs
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/cloudflare.mrs
    path: ./rule-sets/cloudflare-ips.mrs
    interval: 86400
  cloudflare-domains:
    type: http
    behavior: domain
    format: mrs
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/cloudflare.mrs
    path: ./rule-sets/cloudflare-domains.mrs
    interval: 86400
  quic:
    type: inline
    behavior: classical
    payload:
      - AND,((NETWORK,udp),(DST-PORT,443))

rules:
  # DNS HIJACK, –Ω–∞ —Å–ª—É—á–∞–π –µ—Å–ª–∏ –±—É–¥–µ—Ç –æ—Ç–∫–ª—é—á–µ–Ω TUN
  - DST-PORT,53,DNS-OUT

  # –õ–æ–∫–∞–ª—å–Ω—É—é —Å–µ—Ç—å –≤ –¥–∏—Ä–µ–∫—Ç
  - RULE-SET,geoip-private,DIRECT,no-resolve
  - RULE-SET,geosite-private,DIRECT

  # –í–ü–ù –∏ –≤—Å—è–∫–∏–µ Anydesk, Rustdesk, Teamviewer –≤ –¥–∏—Ä–µ–∫—Ç (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –º–æ–∂–Ω–æ —É–±—Ä–∞—Ç—å)
  - PROCESS-NAME-REGEX,(?i).*tailscale.*,DIRECT
  - PROCESS-NAME-REGEX,(?i).*wireguard.*,DIRECT
  - PROCESS-NAME-REGEX,(?i).*netbird.*,DIRECT
  - PROCESS-NAME-REGEX,(?i).*anydesk.*,DIRECT
  - PROCESS-NAME-REGEX,(?i).*rustdesk.*,DIRECT
  - PROCESS-NAME-REGEX,(?i).*teamviewer.*,DIRECT
  - RULE-SET,remote-control,DIRECT

  # –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ä–µ–∫–ª–∞–º—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  - RULE-SET,oisd_big,REJECT # –°–ø–∏—Å–∫–∏ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ Legiz
  # –ü—É—Å–∫–∞–µ–º —ç—Ç–∏ –¥–æ–º–µ–Ω—ã —Ç–≤–∏—á–∞ –≤ –¥–∏—Ä–µ–∫—Ç, —á—Ç–æ–±—ã –∏–∑–±–∞–≤–∏—Ç—å—Å—è –æ—Ç —Ä–µ–∫–ª–∞–º—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  - OR,((DOMAIN-SUFFIX,ads.twitch.tv),(DOMAIN-SUFFIX,playlist.ttvnw.net)),DIRECT
  # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ç–æ—Ä—Ä–µ–Ω—Ç—ã –≤ DIRECT (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  - RULE-SET,torrent-clients,DIRECT
  - RULE-SET,torrent-trackers,DIRECT
  - PROCESS-NAME-REGEX,(?i).*torrent.*,DIRECT

  # –î–µ–ª–∞–µ–º REJECT QUIC (–¥–ª—è VLESS REALITY)
  - RULE-SET,quic,REJECT

  # –û–ø—Ä–µ–¥–µ–ª—è–ª–∫–∏ IP –ø—É—Å–∫–∞–µ–º –≤ –ø—Ä–æ–∫—Å–∏, —á—Ç–æ–±—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–µ–ª
  - DOMAIN,ipwho.is,üö´ –ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∞–π—Ç—ã
  - DOMAIN,api.myip.com,üö´ –ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∞–π—Ç—ã
  - DOMAIN,ipapi.co,üö´ –ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∞–π—Ç—ã
  - DOMAIN,ident.me,üö´ –ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∞–π—Ç—ã
  - DOMAIN,ip-api.com,üö´ –ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∞–π—Ç—ã
  - DOMAIN,ipinfo.io,üö´ –ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∞–π—Ç—ã
  - DOMAIN,api.ip.sb,üö´ –ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∞–π—Ç—ã
  - DOMAIN,2ip.io,üö´ –ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∞–π—Ç—ã
  - DOMAIN,2ipcore.com,üö´ –ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∞–π—Ç—ã

  # -----

  # ‚ñ∂Ô∏è YouTube
  - RULE-SET,youtube,‚ñ∂Ô∏è YouTube
  - PROCESS-NAME-REGEX,(?i).*youtube.*,‚ñ∂Ô∏è YouTube

  # ‚û§ Telegram
  - RULE-SET,telegram-ips,‚û§ Telegram
  - RULE-SET,telegram-domains,‚û§ Telegram
  - PROCESS-NAME-REGEX,(?i).*ayugram.*,‚û§ Telegram
  - PROCESS-NAME-REGEX,(?i).*telegram.*,‚û§ Telegram

  # üí¨ Discord
  - AND,((RULE-SET,cloudflare-ips),(NETWORK,udp),(DST-PORT,19200-19500)),üí¨ Discord
  - AND,((RULE-SET,discord_voiceips),(NETWORK,udp),(DST-PORT,50000-50100)),üí¨ Discord
  - RULE-SET,discord_vc,üí¨ Discord
  - RULE-SET,discord_domains,üí¨ Discord
  - PROCESS-NAME-REGEX,(?i).*discord.*,üí¨ Discord

  # üö´ –ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∞–π—Ç—ã
  - RULE-SET,ru-inside,üö´ –ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∞–π—Ç—ã # ITDog —Å–ø–∏—Å–∫–∏ –¥–æ–º–µ–Ω–æ–≤ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ –∏–∑ –†–§ - https://github.com/itdoginfo/allow-domains/blob/main/Russia/inside-raw.lst
  - RULE-SET,refilter_domains,üö´ –ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∞–π—Ç—ã # Re:Filter —Å–ø–∏—Å–∫–∏ –¥–æ–º–µ–Ω–æ–≤ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ –∏–∑ –†–§ - https://github.com/1andrevich/Re-filter-lists/blob/main/community.lst
  - RULE-SET,ru-inline-banned,üö´ –ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∞–π—Ç—ã # –î–æ–º–µ–Ω—ã –Ω–∞–±–∏—Ç—ã–µ –≤—Ä—É—á–Ω—É—é (—Å–º–æ—Ç—Ä–∏—Ç–µ –≤—ã—à–µ)
  - RULE-SET,inline-blocked-ips,üö´ –ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∞–π—Ç—ã # IP –Ω–∞–±–∏—Ç—ã–µ –≤—Ä—É—á–Ω—É—é (—Å–º–æ—Ç—Ä–∏—Ç–µ –≤—ã—à–µ)
  - RULE-SET,category-porn,üö´ –ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∞–π—Ç—ã # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
  - RULE-SET,ai,üö´ –ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∞–π—Ç—ã # –ù–µ–π—Ä–æ—Å–µ—Ç–∏
  - RULE-SET,google-deepmind,üö´ –ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∞–π—Ç—ã # Google Gemini –∏ AI Studio
  - RULE-SET,speedtest-net,üö´ –ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∞–π—Ç—ã # speedtest.net

  # üü† Cloudflare
  - RULE-SET,cloudflare-ips,üü† Cloudflare # –°–ø–∏—Å–æ–∫ ip MetaCubeX
  - RULE-SET,cloudflare-domains,üü† Cloudflare # –î–æ–º–µ–Ω—ã —Å–µ—Ä–≤–∏—Å–æ–≤ Cloudflare

  # ‚ö™üîµüî¥ RU —Å–∞–π—Ç—ã
  - RULE-SET,ru-inline,‚ö™üîµüî¥ RU —Å–∞–π—Ç—ã # –°–ø–∏—Å–∫–∏ –Ω–∞–±–∏—Ç—ã–µ –≤—Ä—É—á–Ω—É—é (—Å–º–æ—Ç—Ä–∏—Ç–µ –≤—ã—à–µ)
  - RULE-SET,ru-outside,‚ö™üîµüî¥ RU —Å–∞–π—Ç—ã # ITDog —Å–ø–∏—Å–∫–∏ –¥–æ–º–µ–Ω–æ–≤ –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ –†–§ - https://github.com/itdoginfo/allow-domains/blob/main/Russia/outside-raw.lst
  - RULE-SET,ru-apps,‚ö™üîµüî¥ RU —Å–∞–π—Ç—ã # –°–ø–∏—Å–∫–∏ –†–£ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –æ—Ç Legiz
  - RULE-SET,yandex,‚ö™üîµüî¥ RU —Å–∞–π—Ç—ã # –Ø–Ω–¥–µ–∫—Å
  - RULE-SET,mailru,‚ö™üîµüî¥ RU —Å–∞–π—Ç—ã # mail.ru
  - RULE-SET,drweb,‚ö™üîµüî¥ RU —Å–∞–π—Ç—ã # DrWeb
  - RULE-SET,geosite-ru,‚ö™üîµüî¥ RU —Å–∞–π—Ç—ã
  - RULE-SET,geoip-ru,‚ö™üîµüî¥ RU —Å–∞–π—Ç—ã
  - RULE-SET,geoip-by,‚ö™üîµüî¥ RU —Å–∞–π—Ç—ã # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ

  # üåç –û—Å—Ç–∞–ª—å–Ω—ã–µ —Å–∞–π—Ç—ã
  - MATCH,üåç –û—Å—Ç–∞–ª—å–Ω—ã–µ —Å–∞–π—Ç—ã
